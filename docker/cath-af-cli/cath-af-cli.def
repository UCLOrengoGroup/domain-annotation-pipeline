Bootstrap: docker
From: python:3.10-slim-buster

%post
    apt-get update && apt-get install -y --no-install-recommends \
        vim wget gzip tar git g++ make \
    && apt-get autoremove -yqq --purge \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*
    
    mkdir -p /opt/cath-alphaflow
    cd /opt

    git clone https://github.com/UCLOrengoGroup/cath-alphaflow
    pip install --upgrade pip wheel
    pip install -r /opt/cath-alphaflow

    chmod +x /opt/chainsaw/get_predictions.py

%environment
    export PATH="/opt/cath-alphaflow:$PATH"

%runscript
    exec /bin/bash
