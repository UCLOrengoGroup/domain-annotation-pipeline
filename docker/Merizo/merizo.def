Bootstrap: docker
From: python:3.10-slim-buster

%post
    apt-get update && apt-get install -y --no-install-recommends \
        vim wget gzip tar git g++ make \
        && apt-get autoremove -yqq --purge \
        && apt-get clean \
        && rm -rf /var/lib/apt/lists/*
    
    # Cloning Merizo into /opt
    mkdir -p /opt/Merizo
    git clone https://github.com/psipred/Merizo /opt/Merizo
    
    # Installing dependencies
    pip install --upgrade pip wheel
    pip install -r /opt/Merizo/requirements.txt

    # Ensuring correct permissions
    chmod +x /opt/Merizo/predict.py

%environment
    export PATH="/opt/Merizo:$PATH"

%runscript
    exec /bin/bash
